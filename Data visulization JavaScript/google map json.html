
<!-- warning: needed Google Geo map API KEY -->
<!-- here it's reading data from data.js not covid19.json because of warning -->


<!DOCTYPE HTML>
<html>
<head>
	<title>Google API JSON to Google Map</title>
	<meta charset="utf-8">
	<meta name="author" content="SidPro"/>
	<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
	<meta name="description" content="Using Google API read JSON file and create Google Map."/>
	<meta name="keywords" content="Google,API,Geo Chart,Covid19 Geo Chart,Covid19"/>
	<script src="js/jquery-3.5.1.min.js"></script>
	<script src="js/data.js"></script>
	<script type="text/javascript" src="js/loader.js"></script>
</head>
<body>
	<h2>Read JSON file and create Google Map of Total COVID-19 cases in country [Date:01/04/2021]</h2>
	<div id="chart" style="width: 900px; height: 500px"></div>
</body>
    <script type="text/javascript">
		$(document).ready(function() {
        $.ajax({
            url: "covid19.json",
            dataType: "json",
            type: "GET",
            success: function (data) {
                var thearray = [['Country', 'Total COVID-19 Cases']];    // Define an array and assign columns for the chart.
				theData = data.cases;
				console.log(theData);
                // Loop through each data and populate the array.
                theData.forEach(function(v){
					var j = "'"+v.city+"'";
					
					var k = parseInt(v.n);
					
					thearray.push([j,k]);
				});
				console.log(thearray);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert('File not found or Cross-Origin Request Blocked');
            }
        });
    });
	
	function drawChart(){
			// Set chart Options.
			var options = {
				colorAxis: {colors: ['#9bbb58','#4f81bc','#c0504e']},
				backgroundColor: '#81d4fa',
				defaultColor: '#f5f5f5',
				tooltip:{textStyle: {color: '#871b47'}, showColorCode: true}
			};
            // Create DataTable and add the array to it.
            var figures = google.visualization.arrayToDataTable(theaeray)
            var chart = new google.visualization.GeoChart(document.getElementById('chart'));
            chart.draw(figures, options);      // Draw the chart with Options.
    }
	var theaeray = covid19;
	google.charts.load('current', {
		'packages':['geochart'],
		// Note: you will need to get a mapsApiKey for your project.
		// See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
		'mapsApiKey': 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY'
	});
	google.charts.setOnLoadCallback(drawChart);
	
      
	</script>
</html>
  